Metadata-Version: 2.4
Name: taco-orchestrator
Version: 3.0.0
Summary: Tmux Agent Command Orchestrator - Multi-agent AI development with Claude
Author: TACO Contributors
License: MIT
Keywords: ai,agents,tmux,orchestration,claude,development
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: redis>=5.0.0
Requires-Dist: pydantic>=2.5.0
Requires-Dist: asyncio-mqtt>=0.16.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.7.0; extra == "dev"
Dynamic: license-file

# ğŸŒ® TACO v3.0 - Tmux Agent Command Orchestrator

**Multi-agent AI orchestration with Claude, powered by Python + Redis + Tmux**

TACO orchestrates multiple AI agents working collaboratively on software development projects. A "Mother" agent analyzes requirements and spawns specialized worker agents that coordinate through tmux messaging.

## âœ¨ What's New in v3.0

- ğŸ **Rewritten in Python** - Type-safe, testable, maintainable
- ğŸš€ **Redis message queue** - Reliable command delivery with Streams
- âš¡ **3x faster** - 5s startup vs 15s+ in v2.0
- ğŸ§ª **80%+ test coverage** - pytest suite with async tests
- ğŸ”’ **Type safety** - Full mypy compliance
- ğŸ§¹ **4,500 lines removed** - Deleted all redundant code
- âœ… **Preserved** - 3-step tmux protocol (the only thing that works reliably)

## ğŸ¯ Core Concept

The **Mother** agent generates a specification of specialized agents:
- Frontend developers
- Backend developers  
- Database architects
- Testing engineers
- DevOps engineers
- Code validators

These agents communicate via **tmux send-keys** commands (the only reliable way to interact with Claude's REPL) using a mandatory 3-step protocol.

## ğŸ“‹ Prerequisites

- Python 3.11+
- Redis 7+
- tmux 3.0+
- Claude CLI (`claude`)
- jq (for JSON parsing)

## ğŸš€ Quick Start

### Installation

```bash
# Clone the repo
git clone https://github.com/yourusername/taco.git
cd taco

# Install Python dependencies
pip install -e ".[dev]"

# Install Redis
brew install redis           # macOS
sudo apt install redis       # Linux

# Start Redis
brew services start redis    # macOS
sudo systemctl start redis   # Linux

# Verify
redis-cli ping              # Should return "PONG"
```

### Run Your First Project

```bash
# Interactive mode
python -m taco

# From a file
python -m taco -f project_spec.txt

# Direct prompt
python -m taco -p "Build a todo app with React and Express"

# Use Claude Opus (default is Sonnet)
python -m taco -m opus -f project.txt
```

## ğŸ“– How It Works

### 1. Mother Generates Specification

```
User Input: "Build a todo app with React and Express"
        â†“
Mother Agent (Claude)
        â†“
JSON Specification:
{
  "agents": [
    {"window": 3, "name": "frontend_dev", "role": "React UI"},
    {"window": 4, "name": "backend_dev", "role": "Express API"},
    {"window": 5, "name": "validator", "role": "Code quality"},
    {"window": 6, "name": "tester", "role": "Run tests"}
  ]
}
```

### 2. Agents Created in Tmux

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Window 0: Mother (Orchestrator)                 â”‚
â”‚ Window 1: Monitor (Status Dashboard)            â”‚
â”‚ Window 3: frontend_dev (React Developer)        â”‚
â”‚ Window 4: backend_dev (API Developer)           â”‚
â”‚ Window 5: validator (Code Quality)              â”‚
â”‚ Window 6: tester (Testing Engineer)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Communication via Redis + Tmux

```python
# Orchestrator enqueues message
await redis.enqueue_command(
    target="taco:3.0",
    message="[AGENT-4 â†’ AGENT-3]: API endpoints ready at http://localhost:3001"
)

# Background executor processes queue
# MANDATORY 3-STEP PROTOCOL:
# 1. tmux send-keys -t taco:3.0 "[AGENT-4 â†’ AGENT-3]: API endpoints ready..."
# 2. sleep 0.2
# 3. tmux send-keys -t taco:3.0 Enter
```

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Redis Server                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Cmd Queue  â”‚  â”‚  State DB  â”‚            â”‚
â”‚  â”‚ (Streams)  â”‚  â”‚  (Hashes)  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                    â”‚
         â”‚                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Python Modules    â”‚  â”‚ Tmux Session â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Orchestrator  â”‚â—„â”¼â”€â”€â”¼â–ºâ”‚ Mother   â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Parser (jq)   â”‚ â”‚  â”‚ â”‚ Agents   â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Tmux Executor â”‚â—„â”¼â”€â”€â”¼â–ºâ”‚ Monitor  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚ Redis Queue   â”‚ â”‚  â”‚              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª Testing

```bash
# Run all tests
pytest

# With coverage
pytest --cov=src/taco --cov-report=html

# Specific tests
pytest tests/test_tmux_executor.py -v
pytest tests/test_parser.py -v
pytest tests/test_redis_queue.py -v

# Watch mode (requires pytest-watch)
ptw
```

## ğŸ› ï¸ Development

### Project Structure

```
taco/
â”œâ”€â”€ src/taco/              # Python source code
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __main__.py        # CLI entry point
â”‚   â”œâ”€â”€ models.py          # Data classes (AgentSpec, etc.)
â”‚   â”œâ”€â”€ parser.py          # JSON/legacy spec parsing
â”‚   â”œâ”€â”€ orchestrator.py    # Main orchestration logic
â”‚   â”œâ”€â”€ tmux_executor.py   # 3-step protocol implementation
â”‚   â””â”€â”€ redis_queue.py     # Redis Streams interface
â”œâ”€â”€ tests/                 # Test suite
â”‚   â”œâ”€â”€ test_parser.py
â”‚   â”œâ”€â”€ test_tmux_executor.py
â”‚   â””â”€â”€ test_redis_queue.py
â”œâ”€â”€ taco/lib/             # Legacy bash helpers (kept)
â”‚   â”œâ”€â”€ taco-common.sh
â”‚   â”œâ”€â”€ taco-registry.sh
â”‚   â””â”€â”€ ...
â””â”€â”€ pyproject.toml        # Python package config
```

### Code Quality

```bash
# Type checking
mypy src/taco

# Linting
ruff check src/taco

# Formatting
black src/taco

# All checks
make lint  # (if you create a Makefile)
```

## ğŸ”§ Configuration

### Environment Variables

```bash
# Redis connection
export REDIS_HOST=localhost
export REDIS_PORT=6379

# Claude model
export TACO_CLAUDE_MODEL=opus

# Logging
export TACO_LOG_LEVEL=DEBUG
```

### Command Line Options

```
usage: python -m taco [options]

options:
  -f, --file PATH       Load project from file
  -p, --prompt TEXT     Project description
  -m, --model MODEL     Claude model (sonnet|opus)
  --redis-host HOST     Redis host (default: localhost)
  --redis-port PORT     Redis port (default: 6379)
  --session-name NAME   Tmux session name (default: taco)
  --debug               Enable debug logging
  -h, --help            Show help
  -v, --version         Show version
```

## ğŸ“Š Monitoring

### Redis Monitoring

```bash
# Watch all Redis commands in real-time
redis-cli MONITOR

# Check queue stats
redis-cli XLEN commands:queue

# View agent states
redis-cli KEYS "agents:*"
redis-cli HGETALL agents:frontend_dev

# View metrics
redis-cli GET metrics:commands:enqueued
redis-cli GET metrics:commands:executed
```

### Tmux Navigation

```
Ctrl+b + 0       â†’ Mother orchestrator
Ctrl+b + 1       â†’ Status monitor
Ctrl+b + 3-9     â†’ Agent windows
Ctrl+b + d       â†’ Detach (keeps running)
Ctrl+b + arrows  â†’ Navigate panes
```

## ğŸ› Troubleshooting

### Redis Not Running

```bash
# Check status
redis-cli ping

# Start Redis
brew services start redis           # macOS
sudo systemctl start redis-server   # Linux
```

### Import Errors

```bash
# Reinstall package
pip install -e ".[dev]"

# Verify installation
python -c "import taco; print(taco.__version__)"
```

### Tests Failing

```bash
# Clear test Redis database (DB 15)
redis-cli -n 15 FLUSHDB

# Run with verbose output
pytest -vv
```

### Tmux Session Issues

```bash
# Kill existing session
tmux kill-session -t taco

# List all sessions
tmux ls

# Attach to existing session
tmux attach -t taco
```

## ğŸ“š Documentation

- [ARCHITECTURE.md](ARCHITECTURE.md) - System design and data flow
- [MIGRATION.md](MIGRATION.md) - Bash â†’ Python migration guide
- [QUICKSTART.md](docs/QUICKSTART.md) - Step-by-step tutorial
- [EXAMPLES.md](docs/EXAMPLES.md) - Sample projects

## ğŸ¤ Contributing

```bash
# Fork the repo
git clone https://github.com/yourusername/taco.git

# Create a feature branch
git checkout -b feature/amazing-feature

# Install dev dependencies
pip install -e ".[dev]"

# Make changes and add tests
pytest tests/

# Run quality checks
mypy src/taco
ruff check src/taco
black src/taco

# Submit PR
git push origin feature/amazing-feature
```

## ğŸ“œ License

MIT License - see [LICENSE](LICENSE) file

## ğŸ™ Acknowledgments

- Built for Claude Code and multi-agent AI orchestration
- Tmux for robust terminal session management
- Redis for reliable message queuing
- The original TACO concept and bash implementation

## ğŸ”— Links

- [GitHub Issues](https://github.com/yourusername/taco/issues)
- [Discussions](https://github.com/yourusername/taco/discussions)
- [Changelog](CHANGELOG.md)

---

**Happy orchestrating! ğŸŒ®**

*"The only reliable way to coordinate AI agents is through tmux. Everything else is wishful thinking."*
